/*
 * ultrasonic.h
 *
 *  Created on: Apr 12, 2016
 *      Author: Parker
 */

#ifndef ULTRASONIC_H_
#define ULTRASONIC_H_

/*%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
 * Define Ultrasonic Tasks
 *%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% */

/*********************************************************************************************
 * Ultrasonic data collection and processing task
 *********************************************************************************************/
void prvUltrasonic1Task( void *pvParameters );
void prvUltrasonic2Task( void *pvParameters );
void prvUltrasonic3Task( void *pvParameters );

TaskHandle_t xUltrasonic1Handle = NULL;
TaskHandle_t xUltrasonic2Handle = NULL;
TaskHandle_t xUltrasonic3Handle = NULL;

#define	ultrasonicPriority					( tskIDLE_PRIORITY + 1 )

#define ultrasonicFreq						( 500 / portTICK_PERIOD_MS)


/*%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
 * Define Functions
 *%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% */
void setInput(uint16_t pin);
void setOutput(uint16_t pin);


/*%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
 * Global Variables
 *%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% */

/*********************************************************************************************
 * Global reference to ultrasonic distances
 *********************************************************************************************/
volatile int distCM_front;
volatile int distCM_left;
volatile int distCM_right;


/*********************************************************************************************
 * Timer value for ultrasonic counters
 *********************************************************************************************/
volatile int timerValue1;
volatile int timerValue2;
volatile int timerValue3;


/*********************************************************************************************
 * Boolean indicating when a timer value is ready to be read
 *********************************************************************************************/
volatile int done1;
volatile int done2;
volatile int done3;


#endif /* ULTRASONIC_H_ */
