
#ifndef HARDWARE_H_
#define HARDWARE_H_

#include "stm32f4xx_gpio.h"
#include "stm32f4xx_rcc.h"
#include "stm32f4xx_exti.h"
#include "map.h"
#include "trafficLight.h"
#include "mode.h"
#include "power.h"
#include "photo.h"

/*********************************************************************************************
 * Hardware functions
 *********************************************************************************************/
void ledInit();
void wifiInit();
void wifiConfig();
void pwmInit();
void pwmTimerConfig();
void photoResistorInit();
void adcConfig();
void measuredPowerInit();
void ultrasonicInit();
void extiConfig();
void ultrasonicTimerConfig();


/*%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
 * Hardware Definitions
 *%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% */

/*********************************************************************************************
 * General
 *********************************************************************************************/
#define INTERRUPT_ENABLED					1
#define INTERRUPT_DISABLED					0

#define LED2_PIN							GPIO_Pin_5
#define LED2_PORT							GPIOA
#define LED2_CLK							RCC_AHB1Periph_GPIOA

#define SIGNAL1_PIN							GPIO_Pin_6
#define SIGNAL1_PORT						GPIOA
#define SIGNAL1_CLK							RCC_AHB1Periph_GPIOA

#define BUTTON_PIN                   		GPIO_Pin_13
#define BUTTON_PORT            				GPIOC
#define BUTTON_CLK              			RCC_AHB1Periph_GPIOA
#define BUTTON_EXTI_PORT_SOURCE      		GPIO_PortSourceGPIOA
#define BUTTON_EXTI_PIN_SOURCE       		GPIO_PinSource0
#define BUTTON_EXTI_LINE             		EXTI_Line0
#define BUTTON_EXTI_IRQn             		EXTI0_IRQn

#define TIMER5_PIN                   		GPIO_Pin_7
#define TIMER5_PORT            				GPIOA
#define TIMER5_CLK              			RCC_AHB1Periph_GPIOA
#define TIMER5_EXTI_PORT_SOURCE      		GPIO_PortSourceGPIOA
#define TIMER5_EXTI_PIN_SOURCE       		GPIO_PinSource0
#define TIMER5_EXTI_LINE             		EXTI_Line0
#define TIMER5_EXTI_IRQn             		EXTI0_IRQn

#define ON									BSRRL
#define OFF									BSRRH

#define ADC_0_PIN							GPIO_Pin_0
#define ADC_0_PORT							GPIOA
#define ADC_0_CLK							RCC_AHB1Periph_GPIOA

#define ADC_1_PIN							GPIO_Pin_1
#define ADC_1_PORT							GPIOA
#define ADC_1_CLK							RCC_AHB1Periph_GPIOA

#define ADC_2_PIN							GPIO_Pin_4
#define ADC_2_PORT							GPIOA
#define ADC_2_CLK							RCC_AHB1Periph_GPIOA

#define ADC_3_PIN							GPIO_Pin_0
#define ADC_3_PORT							GPIOB
#define ADC_3_CLK							RCC_AHB1Periph_GPIOB

#define ADC_4_PIN							GPIO_Pin_1
#define ADC_4_PORT							GPIOC
#define ADC_4_CLK							RCC_AHB1Periph_GPIOC

#define ADC_5_PIN							GPIO_Pin_0
#define ADC_5_PORT							GPIOC
#define ADC_5_CLK							RCC_AHB1Periph_GPIOC

#define ADC_Periph_CLK						RCC_APB2Periph_ADC1






/*********************************************************************************************
 * Status LEDs
 *********************************************************************************************/
#define LED_LIGHT_NS_RED_PIN				GPIO_Pin_11
#define LED_LIGHT_NS_YELLOW_PIN				GPIO_Pin_12
#define LED_LIGHT_NS_GREEN_PIN				GPIO_Pin_13
#define LED_LIGHT_NS_PINS					GPIO_Pin_11 | GPIO_Pin_12 | GPIO_Pin_13
#define LED_LIGHT_NS_PORT					GPIOC
#define LED_LIGHT_NS_CLK					RCC_AHB1Periph_GPIOC

#define LED_LIGHT_EW_RED_PIN				GPIO_Pin_4
#define LED_LIGHT_EW_YELLOW_PIN				GPIO_Pin_5
#define LED_LIGHT_EW_GREEN_PIN				GPIO_Pin_6
#define LED_LIGHT_EW_PINS					GPIO_Pin_4 | GPIO_Pin_5 | GPIO_Pin_6
#define LED_LIGHT_EW_PORT					GPIOC
#define LED_LIGHT_EW_CLK					RCC_AHB1Periph_GPIOC

#define LED_WIFI_RX_PIN						GPIO_Pin_5
#define LED_WIFI_TX_PIN						GPIO_Pin_6
#define LED_WIFI_PINS						GPIO_Pin_5 | GPIO_Pin_6
#define LED_WIFI_PORT						GPIOB
#define LED_WIFI_CLK						RCC_AHB1Periph_GPIOB

#define LED_ERROR_PIN						GPIO_Pin_7
#define LED_ERROR_PORT						GPIOB
#define LED_ERROR_CLK						RCC_AHB1Periph_GPIOB


/*********************************************************************************************
 * WiFi Module
 *********************************************************************************************/
#define WIFI_TX_PIN							GPIO_Pin_10
#define WIFI_TX_PINSOURCE					GPIO_PinSource10
#define WIFI_RX_PIN							GPIO_Pin_11
#define WIFI_RX_PINSOURCE					GPIO_PinSource11
#define WIFI_PORT							GPIOB
#define WIFI_CLK							RCC_AHB1Periph_GPIOB
#define WIFI_AF								GPIO_AF_USART3

#define WIFI_USART							USART3
#define WIFI_USART_BAUD						9600
#define WIFI_USART_CLK						RCC_APB1Periph_USART3
#define WIFI_USART_IRQ						USART3_IRQn

// Definitions for dev board
//#define WIFI_TX_PIN							GPIO_Pin_9
//#define WIFI_TX_PINSOURCE					GPIO_PinSource9
//#define WIFI_RX_PIN							GPIO_Pin_10
//#define WIFI_RX_PINSOURCE					GPIO_PinSource10
//#define WIFI_PORT							GPIOA
//#define WIFI_CLK							RCC_AHB1Periph_GPIOA
//#define WIFI_AF								GPIO_AF_USART1
//
//#define WIFI_USART							USART1
//#define WIFI_USART_BAUD						9600
//#define WIFI_USART_CLK						RCC_APB2Periph_USART1
//#define WIFI_USART_IRQ						USART1_IRQn


#endif /* HARDWARE_H_ */
