/*
 * trafficLight.c
 *
 *  Created on: Mar 2, 2016
 *      Author: Parker
 */

#include "trafficLight.h"
#include "packet.h"

/*********************************************************************************************
 * Timer callback to blink Traffic Light LED
 *********************************************************************************************/
void prvSendTrafficLightCallback( TimerHandle_t pxTimer ) {

	// Light states
	lightCurrentState current_lights = current_light_state[light_system_state];

	// Iterate through all SAVs
	uint8_t sav;
	for(sav=0; sav<NUMBER_SAV; sav++){
		// Check if active
		if( wifi_channel_active[sav] == TRUE ) {
			// Send current state packet
			sendTrafficLightCurrent( traffic_headers[sav], current_lights.northSouth, current_lights.eastWest );

			// Send future state packet

		}
	}

	switch(light_system_state) {
		case state_1:

			break;
		case state_2:
			break;
		case state_3:
			break;
		case state_4:
			break;
		default:
			break;
	}
}


/*********************************************************************************************
 * Map current state to next state
 *********************************************************************************************/
lightState next_light_state[3] = {green, red, yellow};
